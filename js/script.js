!function(a){var t=a("#search-form-wrap"),n=!1,e=function(){n=!0},i=function(a){setTimeout(function(){n=!1,a&&a()},200)};a("#nav-search-btn").on("click",function(){n||(e(),t.addClass("on"),i(function(){a(".search-form-input").focus()}))}),a(".search-form-input").on("blur",function(){e(),t.removeClass("on"),i()}),a("body").on("click",function(){a(".article-share-box.on").removeClass("on")}).on("click",".article-share-link",function(t){t.stopPropagation();var n=a(this),e=n.attr("data-url"),i=encodeURIComponent(e),o="article-share-box-"+n.attr("data-id"),s=n.offset();if(a("#"+o).length){var r=a("#"+o);if(r.hasClass("on"))return void r.removeClass("on")}else{var c=['<div id="'+o+'" class="article-share-box">','<input class="article-share-input" value="'+e+'">','<div class="article-share-links">','<a href="http://service.weibo.com/share/share.php?&title='+i+'" class="article-share-sina" target="_blank" title="微博"></a>','<a href="http://share.renren.com/share/buttonshare.do?link='+i+'" class="article-share-renren" target="_blank" title="人人"></a>','<a href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url='+i+'" class="article-share-qq" target="_blank" title="QQ 空间"></a>','<a href="http://qr.liantu.com/api.php?text='+i+'" class="article-share-wechat" target="_blank" title="微信"></a>',"</div>","</div>"].join(""),r=a(c);a("body").append(r)}a(".article-share-box.on").hide(),r.css({top:s.top+25,left:s.left}).addClass("on")}).on("click",".article-share-box",function(a){a.stopPropagation()}).on("click",".article-share-box-input",function(){a(this).select()}).on("click",".article-share-box-link",function(a){a.preventDefault(),a.stopPropagation(),window.open(this.href,"article-share-box-window-"+Date.now(),"width=500,height=450")}),a(".article-entry").each(function(t){a(this).find("img").each(function(){if(!a(this).parent().hasClass("fancybox")){var t=this.alt;t&&a(this).after('<span class="caption">'+t+"</span>"),a(this).wrap('<a href="'+this.src+'" title="'+t+'" class="fancybox"></a>')}}),a(this).find(".fancybox").each(function(){a(this).attr("rel","article"+t)})}),a.fancybox&&a(".fancybox").fancybox();var o=a("#container"),s=!1,r=function(){s=!0},c=function(){setTimeout(function(){s=!1},200)};a("#main-nav-toggle").on("click",function(){s||(r(),o.toggleClass("mobile-nav-on"),c())}),a("#wrap").on("click",function(){!s&&o.hasClass("mobile-nav-on")&&o.removeClass("mobile-nav-on")})}(jQuery);